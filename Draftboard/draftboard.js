const apiJSON = {
  status: 200,
  stats: {
    cumulativeBonus: { amount: 166806, currency: 'USD', format: '$166,806' },
    jobs: 41,
    companies: 21
  },
  jobs: [
    {
      id: '194ea093-e6e3-4d03-9607-2182f15fcfe6',
      title: 'RegressionTests',
      company: {
        id: '0537c613-df8a-40d9-ac6b-c8093806011e',
        name: 'STG - LTD - OMG - Intelligent solutions',
        logo: '/p/c/0537c613-df8a-40d9-ac6b-c8093806011e/logo/c549c4c4-e4aa-4c4f-9f57-1ed49e3d6011.png'
      },
      details: {
        bonus: { amount: 10000, currency: 'USD', format: '$10,000' },
        probationPeriod: 45,
        minRating: '4.0',
        id: 'aeb65472-d93a-4f0d-bd9a-8de8ca70bddb'
      },
      publishedAt: {
        datetime: '2023-12-18T06:54:13.921Z',
        format: 'last month'
      },
      badges: [{ id: 'bounty', value: 'Highest bonus' }],
      watchlist: false,
      location: 'Hybrid - New York City, NY',
      status: 1,
      locations: [
        {
          workplace: 1,
          format: 'New York City, NY',
          id: '000035f5-07f5-4b2d-a1cb-3e9f829c29d1'
        }
      ],
      salary: {
        minAmount: 10000,
        maxAmount: 20000,
        currency: 'USD',
        period: 5,
        format: '$10K - $20K',
        id: 'a59856c0-4aab-4d5f-bf80-07ea9ac19c84'
      },
      links: {
        linkedIn:
          'https://www.linkedin.com/search/results/people/?network=%5B%22F%22%5D&origin=GLOBAL_SEARCH_HEADER&titleFreeText=Engineer%20OR%20Engineering%20OR%20Software&keywords=Engineer%20OR%20Engineering%20OR%20Software&geoUrn=%5B%22105080838%22%5D'
      }
    },
    {
      id: '319c471e-8d69-418b-9f1f-83b9cd8001dd',
      title: 'Creative Lead',
      company: { id: '8da0cb8b-5b96-40f2-b2d5-81d1954c24e1', name: 'Faire' },
      details: {
        bonus: { amount: 10000, currency: 'USD', format: '$10,000' },
        probationPeriod: 45,
        minRating: '4.2',
        id: '332b49bf-5b5b-48c2-be92-7217abe67d95'
      },
      publishedAt: { datetime: '2023-03-14T11:10:46.517Z', format: '>3 month' },
      badges: [{ id: 'bounty', value: 'Highest bonus' }],
      watchlist: false,
      location:
        'In-Person - New York City, NY or In-Person - San Francisco, CA',
      status: 1,
      locations: [
        {
          workplace: 0,
          format: 'New York City, NY',
          id: '52345304-cebc-4eba-a41c-4504119d5da2'
        },
        {
          workplace: 0,
          format: 'San Francisco, CA',
          id: 'c775a003-a65e-4553-8a93-a9140b82ae2f'
        }
      ],
      links: {
        linkedIn:
          'https://www.linkedin.com/search/results/people/?network=%5B%22F%22%5D&origin=GLOBAL_SEARCH_HEADER&titleFreeText=Marketing&keywords=Marketing&geoUrn=%5B%22105080838%22%2C%22103644278%22%5D'
      }
    },
    {
      id: '0f6980c8-1ad9-40f0-916f-8bcabf454d37',
      title: 'Frontend Engineer, Growth',
      company: { id: 'be0fc451-b0cc-400b-8b00-a05b1637593c', name: 'Patreon' },
      details: {
        bonus: { amount: 10000, currency: 'USD', format: '$10,000' },
        probationPeriod: 45,
        minRating: '4.2',
        id: '3738abdb-26fb-4a31-ba82-855ee53c3243'
      },
      publishedAt: { datetime: '2023-03-14T11:10:27.933Z', format: '>3 month' },
      badges: [{ id: 'bounty', value: 'Highest bonus' }],
      watchlist: false,
      location: 'In-Person - San Francisco, CA',
      status: 1,
      locations: [
        {
          workplace: 0,
          format: 'San Francisco, CA',
          id: '0bc1d898-3880-4ed4-a7b7-cfe48615479b'
        }
      ],
      links: {
        linkedIn:
          'https://www.linkedin.com/search/results/people/?network=%5B%22F%22%5D&origin=GLOBAL_SEARCH_HEADER&titleFreeText=Frontend%20Engineer%2C%20Growth&keywords=Frontend%20Engineer%2C%20Growth&geoUrn=%5B%22103644278%22%5D'
      }
    },
    {
      id: 'c43d1122-8eb1-4dff-8126-239afef54069',
      title: 'Senior Product Marketing Manager, Creator Tools',
      company: { id: 'be0fc451-b0cc-400b-8b00-a05b1637593c', name: 'Patreon' },
      details: {
        bonus: { amount: 10000, currency: 'USD', format: '$10,000' },
        probationPeriod: 45,
        minRating: '4.2',
        id: '09c0ab37-b476-42d5-b0a5-0345e35c35d8'
      },
      publishedAt: { datetime: '2023-03-14T11:10:27.932Z', format: '>3 month' },
      badges: [{ id: 'bounty', value: 'Highest bonus' }],
      watchlist: false,
      location: 'In-Person - San Francisco, CA',
      status: 1,
      locations: [
        {
          workplace: 0,
          format: 'San Francisco, CA',
          id: '81bfb279-22ca-4e7a-b34a-21077605d870'
        }
      ],
      links: {
        linkedIn:
          'https://www.linkedin.com/search/results/people/?network=%5B%22F%22%5D&origin=GLOBAL_SEARCH_HEADER&titleFreeText=Senior%20Product%20Marketing%20Manager%2C%20Creator%20Tools&keywords=Senior%20Product%20Marketing%20Manager%2C%20Creator%20Tools&geoUrn=%5B%22103644278%22%5D'
      }
    },
    {
      id: 'f8871d35-1d98-429a-997a-1befea092590',
      title: 'Social Media Intern',
      company: {
        id: '36f68368-b984-4b10-bbe5-4c531775742e',
        name: 'MyFitnessPal'
      },
      details: {
        bonus: { amount: 10000, currency: 'USD', format: '$10,000' },
        probationPeriod: 45,
        minRating: '4.2',
        id: 'e1969809-415e-4342-8dc4-843b59507f37'
      },
      publishedAt: { datetime: '2023-03-14T11:09:48.665Z', format: '>3 month' },
      badges: [{ id: 'bounty', value: 'Highest bonus' }],
      watchlist: false,
      location: 'Remote - United States or Remote - United States',
      status: 1,
      locations: [
        {
          workplace: 2,
          format: 'United States',
          id: '6979b6bb-b527-4bd7-8b46-30535ec63c67'
        },
        {
          workplace: 2,
          format: 'United States',
          id: '070151e6-3181-4956-875f-ea2cfc35bf16'
        }
      ],
      links: {
        linkedIn:
          'https://www.linkedin.com/search/results/people/?network=%5B%22F%22%5D&origin=GLOBAL_SEARCH_HEADER&titleFreeText=Social%20Media%20Intern&keywords=Social%20Media%20Intern&geoUrn=%5B%22103644278%22%5D'
      }
    },
    {
      id: '4aa464a2-9005-439c-ae4c-4224e4f0dbbb',
      title: 'Workforce Manager',
      company: { id: '8da0cb8b-5b96-40f2-b2d5-81d1954c24e1', name: 'Faire' },
      details: {
        bonus: { amount: 8000, currency: 'USD', format: '$8,000' },
        probationPeriod: 45,
        minRating: '4.2',
        id: 'a2a31eba-c5b0-46fc-b13f-019aa5d48d92'
      },
      publishedAt: { datetime: '2023-03-14T11:10:46.502Z', format: '>3 month' },
      badges: [{ id: 'bounty', value: 'Highest bonus' }],
      watchlist: false,
      location: 'Remote - United States',
      status: 1,
      locations: [
        {
          workplace: 2,
          format: 'United States',
          id: '66b56f7d-eb5d-4144-8cc1-7c1ea3596975'
        }
      ],
      links: {
        linkedIn:
          'https://www.linkedin.com/search/results/people/?network=%5B%22F%22%5D&origin=GLOBAL_SEARCH_HEADER&titleFreeText=Workforce%20Manager&keywords=Workforce%20Manager&geoUrn=%5B%22103644278%22%5D'
      }
    }
  ],
  functions: [
    { function: { title: 'Other' }, jobs: 23 },
    { function: { id: 7, title: 'Engineering' }, jobs: 11 },
    { function: { id: 6, title: 'Design' }, jobs: 3 },
    { function: { id: 13, title: 'Product' }, jobs: 2 },
    { function: { id: 10, title: 'Marketing' }, jobs: 1 }
  ]
}

// ==========================================================
const URL = 'https://stage.draftboard.ai/api/v1/landing'

// fetch(URL, {
//   method: 'GET',
//   headers: {
//     Accept: 'application/json'
//   }
// })
//   .then((response) => response.json())
//   .then((response) => console.log(JSON.stringify(response)))

const jobsStatWrap = document.getElementById('jobsStatWrap')
const jobsListWrap = document.getElementById('jobsListWrap')

for (let i = apiJSON.functions.length - 1; i >= 0; i--) {
  // add child div with title and jobs count
  let newElem = jobsStatWrap.appendChild(document.createElement('p'))
  newElem.innerHTML = `
  <span class="jobFunction"><strong>${apiJSON.functions[i].function.title}</strong></span> 
  <span class="jobCount">${apiJSON.functions[i].jobs}</span>
  `
}

for (let i = apiJSON.jobs.length - 1; i >= 0; i--) {
  console.log(apiJSON.jobs[i].title, apiJSON.jobs[i].company.name)
  // add child div with title and jobs count
  let logoSrc
  if (apiJSON.jobs[i].company.logo) {
    // logoSrc = `https://files.draftboard.com${apiJSON.jobs[i].company.logo}`
    logoSrc = 'https://via.placeholder.com/150'
  } else {
    logoSrc = 'https://via.placeholder.com/150'
  }

  newElem = jobsListWrap.appendChild(document.createElement('div'))
  newElem.className = 'jobItemWrap'
  newElem.innerHTML = `
  <img src="${logoSrc}" alt="${apiJSON.jobs[i].company.name}" class="jobLogo">
  <div class="jobItemInfo">
  <div class="jobCompany">${apiJSON.jobs[i].company.name}</div>
  <div class="jobTitle">${apiJSON.jobs[i].title}</div> 
  <div class="jobLocation">${apiJSON.jobs[i].location}</div>
  </div>
  <div class="jobItemDetailsWrap">
  <div class="jobSalary">${apiJSON.jobs[i].details.bonus.format}</div>
  <a href="${apiJSON.jobs[i].links.linkedIn}" class="jobItemLink" target="_blank">Share</a>
  <a href="https://app.draftboard.com/" class="jobItemStar" target="_blank"><img src="https://uploads-ssl.webflow.com/6363c032cc668650587183e2/659ec5df9a8519dda28e3f84_star-icon.svg" alt="Star icon"></a>
  </div>
  `
}
